/* ---
   SSAD Auth Page Stylesheet (auth.css)
   Contains only styles for the index.html page.
   --- */

/* 1. Auth Page Layout
   ----------------------------- */

/* [MODIFIED] Allow scrolling if card is too tall */
html, body {
    overflow: auto; /* <-- FIXED: Was 'hidden' */
}

.auth-container {
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: 100dvh; /* Dynamic viewport height */
    padding: 2rem;
    
    /* Smoother, single background gradient */
    background-image: radial-gradient(
        ellipse at top, 
        rgba(59, 130, 246, 0.15), 
        transparent 60%
      ),
      radial-gradient(
        ellipse at bottom, 
        rgba(100, 116, 139, 0.1), 
        transparent 70%
      );
}

.auth-card {
    perspective: 1500px;
    width: 100%;
    max-width: 420px;
    background-color: transparent;
    /* Add a little margin for spacing when scrolling */
    margin: 2rem 0; 
}

.auth-card-inner {
    position: relative;
    width: 100%;
    /* This allows the card to flip */
    transform-style: preserve-3d;
    transition: transform 0.8s cubic-bezier(0.76, 0, 0.24, 1);
    
    /* Use grid to dynamically size the card to the TALLEST face */
    display: grid;
}

/* This is the JS hook that performs the flip */
.auth-card.is-flipped .auth-card-inner {
    transform: rotateY(180deg);
}

.auth-card-face {
    /* Stack both faces in the same grid cell */
    grid-area: 1 / 1;
    
    width: 100%;
    -webkit-backface-visibility: hidden;
    backface-visibility: hidden;
    
    /* Glassmorphism Effect */
    background-color: var(--bg-glass);
    backdrop-filter: blur(12px) saturate(150%);
    -webkit-backdrop-filter: blur(12px) saturate(150%);
    border: 1px solid var(--bg-glass-border);
    border-radius: 16px;
    box-shadow: 0 8px 32px 0 var(--shadow-color);
    
    padding: 2.5rem;
    display: flex;
    flex-direction: column;
    justify-content: center;
}

.auth-card-face.auth-card-back {
    /* Pre-rotate the back face */
    transform: rotateY(180deg);
}


/* 2. Auth Form Specifics
   ----------------------------- */

.auth-form h2 {
    font-size: 1.75rem;
    font-weight: 700;
    text-align: center;
    margin-bottom: 0.5rem;
    color: var(--text-primary);
}

.auth-form .auth-subtitle {
    font-size: 0.95rem;
    text-align: center;
    margin-bottom: 2rem;
    color: var(--text-secondary);
}

.flip-link {
    font-size: 0.9rem;
    text-align: center;
    margin-top: 1.5rem;
    color: var(--text-secondary);
    cursor: pointer;
}

.flip-link span {
    font-weight: 600;
    color: var(--accent-primary);
    transition: color 0.3s ease;
}

.flip-link:hover span {
    color: var(--accent-hover);
    text-decoration: underline;
}


/* 3. Password Generator
   ----------------------------- */

.password-gen-label {
    display: block;
    font-size: 0.875rem;
    font-weight: 500;
    margin-bottom: 0.5rem;
    color: var(--text-secondary);
}

.password-gen-group {
    display: flex;
    gap: 0.75rem;
    margin-bottom: 1.5rem;
}

.password-gen-group select {
    flex-grow: 1;
    font-size: 0.9rem;
    padding: 0.85rem 1rem; /* Matched input padding */
    padding-right: 2.5rem; /* Keep space for arrow */
}

.password-gen-group .btn-secondary {
    width: auto;
    flex-shrink: 0;
    padding: 0.85rem 1rem; /* Matched input padding */
    font-size: 0.9rem;
}

/* 4. Responsive Design (Auth)
   ----------------------------- */
@media (max-width: 480px) {
    /* Allow scrolling on mobile if content is too tall */
    html, body {
        overflow: auto;
    }

    .auth-container {
        padding: 1rem;
        align-items: flex-start; /* Align to top on mobile */
        padding-top: 3rem;
        /* Disable full height on mobile */
        min-height: 0; 
    }

    .auth-card-inner {
        position: static; /* Disable absolute positioning */
        min-height: 0;
        transform-style: flat;
        display: block; /* [MODIFIED] Revert grid for mobile */
    }
    
    .auth-card-face {
        position: static; /* Disable absolute positioning */
        padding: 2rem 1.5rem;
        transform: none !important; /* Disable all transforms */
        grid-area: auto; /* [MODIFIED] Revert grid for mobile */
    }

    /* On mobile, we hide/show instead of flip */
    .auth-card-face.auth-card-back {
        display: none;
    }

    .auth-card.is-flipped .auth-card-face.auth-card-front {
        display: none;
    }
    
    .auth-card.is-flipped .auth-card-face.auth-card-back {
        display: flex;
    }

    .auth-form h2 {
        font-size: 1.5rem;
    }

    .password-gen-group {
        flex-direction: column;
    }
    
    .password-gen-group .btn-secondary {
        width: 100%;
    }
}

/* Responsive fix for card inner height */
@media (max-width: 480px) and (min-height: 600px) {
    .auth-container {
        /* Re-center if screen is tall */
        min-height: 100dvh;
        align-items: center;
        padding-top: 1rem;
    }
}


/* --- [MODIFIED] Styles for Password Toggle Button --- */

.password-input-wrapper {
    position: relative;
}

/* Ajoute un padding à droite pour faire de la place à l'icône */
.password-input-wrapper input[type="password"],
.password-input-wrapper input[type="text"] {
    padding-right: 3.5rem; /* 1rem (original) + 2.5rem (pour le bouton) */
}

.password-toggle-btn {
    position: absolute;
    top: 50%; /* Centre verticalement par rapport à l'input */
    right: 0.75rem;
    transform: translateY(-50%);
    
    /* Reset du style bouton */
    background: transparent;
    border: none;
    padding: 0.5rem;
    margin: 0;
    cursor: pointer;
    
    /* Style de l'icône */
    color: var(--text-secondary);
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    transition: background-color 0.2s ease, color 0.2s ease;
}

.password-toggle-btn:hover {
    background-color: var(--accent-secondary);
    color: var(--text-primary);
}

.password-toggle-btn i {
    width: 18px;
    height: 18px;
}

/* Logique d'animation et de bascule */
@keyframes spin-in {
    from {
        transform: rotate(-90deg) scale(0.5);
        opacity: 0;
    }
    to {
        transform: rotate(0deg) scale(1);
        opacity: 1;
    }
}

.password-toggle-btn .icon-eye-off {
    display: none; /* Cache l'œil barré par défaut */
}

.password-toggle-btn.is-showing .icon-eye {
    display: none; /* Cache l'œil normal */
}

.password-toggle-btn.is-showing .icon-eye-off {
    display: block; /* Montre l'œil barré */
    animation: spin-in 0.3s ease-out;
}

/* Applique l'animation au retour */
.password-toggle-btn:not(.is-showing) .icon-eye {
     animation: spin-in 0.3s ease-out;
}

/* --- [NEW] Styles for CAPTCHA & Lockout Timer --- */

.g-recaptcha {
    margin: 1.5rem 0;
    display: flex;
    justify-content: center;
    /* The widget itself is hard to style, but we can center it */
}

.lockout-timer {
    font-size: 0.9rem;
    font-weight: 500;
    color: var(--error);
    background-color: color-mix(in srgb, var(--error) 15%, transparent);
    border: 1px solid color-mix(in srgb, var(--error) 30%, transparent);
    border-radius: 8px;
    padding: 0.75rem 1rem;
    text-align: center;
    margin-bottom: 1.5rem;
}